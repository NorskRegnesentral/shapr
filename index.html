<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Prediction Explanation with Dependence-Aware Shapley Values • shapr</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Prediction Explanation with Dependence-Aware Shapley Values">
<meta name="description" content="Complex machine learning models are often hard to interpret. However, in many situations it is crucial to understand and explain why a model made a specific prediction. Shapley values is the only method for such prediction explanation framework with a solid theoretical foundation. Previously known methods for estimating the Shapley values do, however, assume feature independence. This package implements methods which accounts for any feature dependence, and thereby produces more accurate estimates of the true Shapley values. An accompanying Python wrapper (shaprpy) is available through PyPI.">
<meta property="og:description" content="Complex machine learning models are often hard to interpret. However, in many situations it is crucial to understand and explain why a model made a specific prediction. Shapley values is the only method for such prediction explanation framework with a solid theoretical foundation. Previously known methods for estimating the Shapley values do, however, assume feature independence. This package implements methods which accounts for any feature dependence, and thereby produces more accurate estimates of the true Shapley values. An accompanying Python wrapper (shaprpy) is available through PyPI.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">shapr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="articles/general_usage.html">General usage of shapr</a></li>
    <li><a class="dropdown-item" href="articles/vaeac.html">Advanced usage of the `vaeac` approach</a></li>
    <li><a class="dropdown-item" href="articles/regression.html">The separate and surrogate regression approches</a></li>
    <li><a class="dropdown-item" href="articles/asymmetric_causal.html">Asymmetric and Causal Shapley values</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Manual</a></li>
<li class="nav-item"><a class="nav-link" href="shaprpy.html">Python</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NorskRegnesentral/shapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="shapr-">shapr <img src="reference/figures/nrlogo_new.jpg" align="right" height="100"><a class="anchor" aria-label="anchor" href="#shapr-"></a>
</h1></div>
<!-- badges: start -->

<p>See the pkgdown site at <a href="https://norskregnesentral.github.io/shapr/">norskregnesentral.github.io/shapr/</a> for a complete introduction with examples and documentation of the package.</p>
<p>For an overview of the methodology and capabilities of the package (per <code>shapr</code> v1.0.8), see the software paper Jullum et al. (<a href="#ref-jullum2025shapr">2025</a>), available as a preprint <a href="https://arxiv.org/abs/2504.01842" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="news">NEWS<a class="anchor" aria-label="anchor" href="#news"></a>
</h2>
<p>With <code>shapr</code> version 1.0.0 (GitHub only, Nov 2024) and version 1.0.1 (CRAN, Jan 2025), the package underwent a major update, providing a full restructuring of the code base, and a full suite of new functionality, including:</p>
<ul>
<li>A long list of approaches for estimating the contribution/value function <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">v(S)</annotation></semantics></math>, including Variational Autoencoders and regression-based methods</li>
<li>Iterative Shapley value estimation with convergence detection</li>
<li>Parallelized computations with progress updates</li>
<li>Reweighted Kernel SHAP for faster convergence</li>
<li>New function <code><a href="reference/explain_forecast.html">explain_forecast()</a></code> for explaining forecasts</li>
<li>Asymmetric and causal Shapley values</li>
<li>Several other methodological, computational and user-experience improvements</li>
<li>Python wrapper <code>shaprpy</code> making the core functionality of <code>shapr</code> available in Python</li>
</ul>
<p>See the <a href="https://norskregnesentral.github.io/shapr/news/index.html">NEWS</a> for a complete list.</p>
<div class="section level3">
<h3 id="coming-from-shapr--100">Coming from shapr &lt; 1.0.0?<a class="anchor" aria-label="anchor" href="#coming-from-shapr--100"></a>
</h3>
<p><code>shapr</code> version &gt;= 1.0.0 comes with a number of breaking changes. Most notably, we moved from using two functions (<code><a href="reference/shapr-package.html">shapr()</a></code> and <code><a href="reference/explain.html">explain()</a></code>) to one function (<code><a href="reference/explain.html">explain()</a></code>). In addition, custom models are now explained by passing the prediction function directly to <code><a href="reference/explain.html">explain()</a></code>. Several input arguments were renamed, and a few functions for edge cases were removed to simplify the code base.</p>
<p>Click <a href="https://github.com/NorskRegnesentral/shapr/blob/cranversion_0.2.2/README.md" class="external-link">here</a> to view a version of this README with the old syntax (v0.2.2).</p>
</div>
<div class="section level3">
<h3 id="python-wrapper">Python wrapper<a class="anchor" aria-label="anchor" href="#python-wrapper"></a>
</h3>
<p>We provide a Python wrapper (<code>shaprpy</code>) which allows explaining Python models with the methodology implemented in <code>shapr</code>, directly from Python. The wrapper calls R internally and therefore requires an installation of R. See <a href="https://norskregnesentral.github.io/shapr/shaprpy.html">here</a> for installation instructions and examples.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-package">The package<a class="anchor" aria-label="anchor" href="#the-package"></a>
</h2>
<p>The <code>shapr</code> R package implements an enhanced version of the Kernel SHAP method for approximating Shapley values, with a strong focus on conditional Shapley values. The core idea is to remain completely model-agnostic while offering a variety of methods for estimating contribution functions, enabling accurate computation of conditional Shapley values across different feature types, dependencies, and distributions. The package also includes evaluation metrics to compare various approaches. With features like parallelized computations, convergence detection, progress updates, and extensive plotting options, shapr is a highly efficient and user-friendly tool, delivering precise estimates of conditional Shapley values, which are critical for understanding how features truly contribute to predictions.</p>
<p>A basic example is provided below. Otherwise, we refer to the <a href="https://norskregnesentral.github.io/shapr/">pkgdown website</a> and the vignettes there for details and further examples.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>shapr</code> is available on <a href="https://cran.r-project.org/package=shapr" class="external-link">CRAN</a> and can be installed in R as:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"shapr"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version of <code>shapr</code>, available on GitHub, use</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"NorskRegnesentral/shapr"</span><span class="op">)</span></span></code></pre></div>
<p>To also install all dependencies, use</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"NorskRegnesentral/shapr"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p><code>shapr</code> supports computation of Shapley values with any predictive model that takes a set of numeric features and produces a numeric outcome.</p>
<p>The following example shows how a simple <code>xgboost</code> model is trained using the <em>airquality</em> dataset, and how <code>shapr</code> explains the individual predictions.</p>
<p>We first enable parallel computation and progress updates with the following code chunk. These are optional, but recommended for improved performance and user-friendliness, particularly for problems with many features.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enable parallel computation</span></span>
<span><span class="co"># Requires the future and future_lapply packages</span></span>
<span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"multisession"</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># Increase the number of workers for increased performance with many features</span></span>
<span></span>
<span><span class="co"># Enable progress updates of the v(S) computations</span></span>
<span><span class="co"># Requires the progressr package</span></span>
<span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span><span class="st">"cli"</span><span class="op">)</span> <span class="co"># Using the cli package as backend (recommended for the estimates of the remaining time)</span></span></code></pre></div>
<p>Here is the actual example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmlc/xgboost" class="external-link">xgboost</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://norskregnesentral.github.io/shapr/">shapr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"airquality"</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/stats/complete.cases.html" class="external-link">complete.cases</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">x_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Solar.R"</span>, <span class="st">"Wind"</span>, <span class="st">"Temp"</span>, <span class="st">"Month"</span><span class="op">)</span></span>
<span><span class="va">y_var</span> <span class="op">&lt;-</span> <span class="st">"Ozone"</span></span>
<span></span>
<span><span class="va">ind_x_explain</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span><span class="va">x_train</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="va">ind_x_explain</span>, <span class="va">..x_var</span><span class="op">]</span></span>
<span><span class="va">y_train</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="va">ind_x_explain</span>, <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="va">y_var</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">x_explain</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">ind_x_explain</span>, <span class="va">..x_var</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Look at the dependence between the features</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x_train</span><span class="op">)</span></span>
<span><span class="co">#&gt;            Solar.R       Wind       Temp      Month</span></span>
<span><span class="co">#&gt; Solar.R  1.0000000 -0.1243826  0.3333554 -0.0710397</span></span>
<span><span class="co">#&gt; Wind    -0.1243826  1.0000000 -0.5152133 -0.2013740</span></span>
<span><span class="co">#&gt; Temp     0.3333554 -0.5152133  1.0000000  0.3400084</span></span>
<span><span class="co">#&gt; Month   -0.0710397 -0.2013740  0.3400084  1.0000000</span></span>
<span></span>
<span><span class="co"># Fit a basic xgboost model to the training data</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xgboost/man/xgboost.html" class="external-link">xgboost</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">x_train</span>,</span>
<span>  y <span class="op">=</span> <span class="va">y_train</span>,</span>
<span>  nround <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  verbosity <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify phi_0, i.e., the expected prediction without any features</span></span>
<span><span class="va">p0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">y_train</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compute Shapley values with Kernel SHAP, accounting for feature dependence using</span></span>
<span><span class="co"># the empirical (conditional) distribution approach with bandwidth parameter sigma = 0.1 (default)</span></span>
<span><span class="va">explanation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/explain.html">explain</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>  x_explain <span class="op">=</span> <span class="va">x_explain</span>,</span>
<span>  x_train <span class="op">=</span> <span class="va">x_train</span>,</span>
<span>  approach <span class="op">=</span> <span class="st">"empirical"</span>,</span>
<span>  phi0 <span class="op">=</span> <span class="va">p0</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Starting `shapr::explain()` at 2026-01-20 14:38:04 ──────────────────────────</span></span>
<span><span class="co">#&gt; ℹ `max_n_coalitions` is `NULL` or larger than `2^n_features = 16`, and is</span></span>
<span><span class="co">#&gt;   therefore set to `2^n_features = 16`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Explanation overview ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Model class: &lt;xgboost&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • v(S) estimation class: Monte Carlo integration</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Approach: empirical</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Procedure: Non-iterative</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Number of Monte Carlo integration samples: 1000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Number of feature-wise Shapley values: 4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Number of observations to explain: 6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Computations (temporary) saved at:</span></span>
<span><span class="co">#&gt; '/tmp/RtmpUe11kD/shapr_obj_4794843bd8c8.rds'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Main computation started ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Using 16 of 16 coalitions.</span></span>
<span></span>
<span><span class="co"># Print the Shapley values for the observations to explain.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">explanation</span><span class="op">)</span></span>
<span><span class="co">#&gt;    explain_id  none Solar.R   Wind   Temp  Month</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:          1  43.1  12.315   2.78 -27.98  -2.07</span></span>
<span><span class="co">#&gt; 2:          2  43.1  -8.514   4.69 -13.96  -7.85</span></span>
<span><span class="co">#&gt; 3:          3  43.1  -2.767 -10.27  -9.95  -3.87</span></span>
<span><span class="co">#&gt; 4:          4  43.1  -0.945  -4.18 -14.06  -6.80</span></span>
<span><span class="co">#&gt; 5:          5  43.1   4.058  -2.07 -11.94 -12.02</span></span>
<span><span class="co">#&gt; 6:          6  43.1  -0.290  -7.28 -13.46  -6.50</span></span>
<span></span>
<span><span class="co"># Provide a formatted summary of the shapr object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">explanation</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Summary of Shapley value explanation ────────────────────────────────────────</span></span>
<span><span class="co">#&gt; • Computed with `shapr::explain()` in 2.2 seconds, started 2026-01-20 14:38:04</span></span>
<span><span class="co">#&gt; • Model class: &lt;xgboost&gt;</span></span>
<span><span class="co">#&gt; • v(S) estimation class: Monte Carlo integration</span></span>
<span><span class="co">#&gt; • Approach: empirical</span></span>
<span><span class="co">#&gt; • Procedure: Non-iterative</span></span>
<span><span class="co">#&gt; • Number of Monte Carlo integration samples: 1000</span></span>
<span><span class="co">#&gt; • Number of feature-wise Shapley values: 4</span></span>
<span><span class="co">#&gt; • Number of observations to explain: 6</span></span>
<span><span class="co">#&gt; • Number of coalitions used: 16 (of total 16)</span></span>
<span><span class="co">#&gt; • Computations (temporary) saved at:</span></span>
<span><span class="co">#&gt; '/tmp/RtmpUe11kD/shapr_obj_4794843bd8c8.rds'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Estimated Shapley values </span></span>
<span><span class="co">#&gt;    explain_id   none Solar.R   Wind   Temp  Month</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;char&gt;  &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:          1  43.09   12.31   2.78 -27.98  -2.07</span></span>
<span><span class="co">#&gt; 2:          2  43.09   -8.51   4.69 -13.96  -7.85</span></span>
<span><span class="co">#&gt; 3:          3  43.09   -2.77 -10.27  -9.95  -3.87</span></span>
<span><span class="co">#&gt; 4:          4  43.09   -0.95  -4.18 -14.06  -6.80</span></span>
<span><span class="co">#&gt; 5:          5  43.09    4.06  -2.07 -11.94 -12.02</span></span>
<span><span class="co">#&gt; 6:          6  43.09   -0.29  -7.28 -13.46  -6.50</span></span>
<span><span class="co">#&gt; ── Estimated MSEv </span></span>
<span><span class="co">#&gt; Estimated MSE of v(S) = 208 (with sd = 116)</span></span>
<span></span>
<span><span class="co"># Finally, we plot the resulting explanations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">explanation</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-basic_example-1.png" alt="" width="100%"></p>
<p>See Jullum et al. (<a href="#ref-jullum2025shapr">2025</a>) (preprint available <a href="https://arxiv.org/abs/2504.01842" class="external-link">here</a>) for a software paper with an overview of the methodology and capabilities of the package (as of v1.0.8). See the <a href="https://norskregnesentral.github.io/shapr/articles/general_usage.html">general usage vignette</a> for further basic usage examples and brief introductions to the methodology. For more thorough information about the underlying methodology, see methodological papers Aas, Jullum, and Løland (<a href="#ref-aas2019explaining">2021</a>), Redelmeier, Jullum, and Aas (<a href="#ref-redelmeier2020explaining">2020</a>), Jullum, Redelmeier, and Aas (<a href="#ref-jullum2021efficient">2021</a>), Olsen et al. (<a href="#ref-olsen2022using">2022</a>), Olsen et al. (<a href="#ref-olsen2024comparative">2024</a>) and Olsen and Jullum (<a href="#ref-olsen2025improving">2025</a>). See also Sellereite and Jullum (<a href="#ref-sellereite2019shapr">2019</a>) for a very brief paper about a previous version (v0.1.1) of the package (with a different structure, syntax, and significantly less functionality).</p>
</div>
<div class="section level2">
<h2 id="contribution">Contribution<a class="anchor" aria-label="anchor" href="#contribution"></a>
</h2>
<p>All feedback and suggestions are very welcome. Details on how to contribute can be found <a href="https://norskregnesentral.github.io/shapr/CONTRIBUTING.html">here</a>. If you have any questions or comments, feel free to open an issue <a href="https://github.com/NorskRegnesentral/shapr/issues" class="external-link">here</a>.</p>
<p>Please note that the <code>shapr</code> project is released with a <a href="https://norskregnesentral.github.io/shapr/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-aas2019explaining" class="csl-entry">
Aas, Kjersti, Martin Jullum, and Anders Løland. 2021. “Explaining Individual Predictions When Features Are Dependent: More Accurate Approximations to Shapley Values.” <em>Artificial Intelligence</em> 298. <a href="https://doi.org/10.1016/j.artint.2021.103502" class="external-link uri">https://doi.org/10.1016/j.artint.2021.103502</a>.
</div>
<div id="ref-jullum2025shapr" class="csl-entry">
Jullum, Martin, Lars Henry Berge Olsen, Jon Lachmann, and Annabelle Redelmeier. 2025. “Shapr: Explaining Machine Learning Models with Conditional Shapley Values in R and Python.” <em>arXiv Preprint arXiv:2504.01842</em>. <a href="https://arxiv.org/abs/2504.01842" class="external-link uri">https://arxiv.org/abs/2504.01842</a>.
</div>
<div id="ref-jullum2021efficient" class="csl-entry">
Jullum, Martin, Annabelle Redelmeier, and Kjersti Aas. 2021. “Efficient and Simple Prediction Explanations with groupShapley: A Practical Perspective.” In <em>Proceedings of the 2nd Italian Workshop on Explainable Artificial Intelligence</em>, 28–43. CEUR Workshop Proceedings.
</div>
<div id="ref-olsen2022using" class="csl-entry">
Olsen, Lars Henry Berge, Ingrid Kristine Glad, Martin Jullum, and Kjersti Aas. 2022. “Using Shapley Values and Variational Autoencoders to Explain Predictive Models with Dependent Mixed Features.” <em>Journal of Machine Learning Research</em> 23 (213): 1–51.
</div>
<div id="ref-olsen2024comparative" class="csl-entry">
———. 2024. “A Comparative Study of Methods for Estimating Model-Agnostic Shapley Value Explanations.” <em>Data Mining and Knowledge Discovery</em>, 1–48.
</div>
<div id="ref-olsen2025improving" class="csl-entry">
Olsen, Lars Henry Berge, and Martin Jullum. 2025. “Improving the Weighting Strategy in KernelSHAP.” In <em>World Conference on Explainable Artificial Intelligence</em>, 194–218. Springer.
</div>
<div id="ref-redelmeier2020explaining" class="csl-entry">
Redelmeier, Annabelle, Martin Jullum, and Kjersti Aas. 2020. “Explaining Predictive Models with Mixed Features Using Shapley Values and Conditional Inference Trees.” In <em>International Cross-Domain Conference for Machine Learning and Knowledge Extraction</em>, 117–37. Springer.
</div>
<div id="ref-sellereite2019shapr" class="csl-entry">
Sellereite, N., and M. Jullum. 2019. “Shapr: An r-Package for Explaining Machine Learning Models with Dependence-Aware Shapley Values.” <em>Journal of Open Source Software</em> 5 (46): 2027. <a href="https://doi.org/10.21105/joss.02027" class="external-link uri">https://doi.org/10.21105/joss.02027</a>.
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=shapr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/NorskRegnesentral/shapr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/NorskRegnesentral/shapr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing shapr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Martin Jullum <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0003-3908-5155" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Lars Henry Berge Olsen <br><small class="roles"> Author </small> <a href="https://orcid.org/0009-0006-9360-6993" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Annabelle Redelmeier <br><small class="roles"> Author </small>   </li>
<li>Jon Lachmann <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8396-5673" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Nikolai Sellereite <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4671-0337" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Norsk Regnesentral <br><small class="roles"> Copyright holder, funder </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=shapr" class="external-link"><img src="https://www.r-pkg.org/badges/version-last-release/shapr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=shapr" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/shapr" alt="CRAN_Downloads_Badge"></a></li>
<li><a href="https://github.com/NorskRegnesentral/shapr/actions?query=workflow%3AR-CMD-check" class="external-link"><img src="https://github.com/NorskRegnesentral/shapr/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://opensource.org/license/mit" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://doi.org/10.21105/joss.02027" class="external-link"><img src="https://img.shields.io/badge/JOSS%20(v0.2.3)-10.21105/joss.02027-brightgreen.svg" alt="JOSS (v0.2.3)"></a></li>
<li><a href="https://arxiv.org/abs/2504.01842" class="external-link"><img src="https://img.shields.io/badge/arXiv%20(v1.0.8)-2504.01842-b31b1b.svg" alt="arXiv (v1.0.8)"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Jullum, Lars Henry Berge Olsen, Annabelle Redelmeier, Jon Lachmann, Nikolai Sellereite, Norsk Regnesentral.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
