<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function to set up data loaders and save file names — vaeac_get_data_objects • shapr</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to set up data loaders and save file names — vaeac_get_data_objects"><meta name="description" content="Function to set up data loaders and save file names"><meta property="og:description" content="Function to set up data loaders and save file names"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">shapr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/general_usage.html">General usage of shapr</a></li>
    <li><a class="dropdown-item" href="../articles/vaeac.html">Advanced usage of the `vaeac` approach</a></li>
    <li><a class="dropdown-item" href="../articles/regression.html">The separate and surrogate regression approches</a></li>
    <li><a class="dropdown-item" href="../articles/asymmetric_causal.html">Asymmetric and Causal Shapley values</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Manual</a></li>
<li class="nav-item"><a class="nav-link" href="../shaprpy.html">Python</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NorskRegnesentral/shapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Function to set up data loaders and save file names</h1>
      <small class="dont-index">Source: <a href="https://github.com/NorskRegnesentral/shapr/blob/master/R/approach_vaeac.R" class="external-link"><code>R/approach_vaeac.R</code></a></small>
      <div class="d-none name"><code>vaeac_get_data_objects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to set up data loaders and save file names</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vaeac_get_data_objects</span><span class="op">(</span></span>
<span>  <span class="va">x_train</span>,</span>
<span>  <span class="va">log_exp_cont_feat</span>,</span>
<span>  <span class="va">val_ratio</span>,</span>
<span>  <span class="va">batch_size</span>,</span>
<span>  <span class="va">paired_sampling</span>,</span>
<span>  <span class="va">model_description</span>,</span>
<span>  <span class="va">depth</span>,</span>
<span>  <span class="va">width</span>,</span>
<span>  <span class="va">latent_dim</span>,</span>
<span>  <span class="va">lr</span>,</span>
<span>  <span class="va">epochs</span>,</span>
<span>  <span class="va">save_every_nth_epoch</span>,</span>
<span>  <span class="va">folder_to_save_model</span>,</span>
<span>  train_indices <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  val_indices <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-train">x_train<a class="anchor" aria-label="anchor" href="#arg-x-train"></a></dt>
<dd><p>A data.table containing the training data. Categorical data must have class names \(1,2,\dots,K\).</p></dd>


<dt id="arg-log-exp-cont-feat">log_exp_cont_feat<a class="anchor" aria-label="anchor" href="#arg-log-exp-cont-feat"></a></dt>
<dd><p>Logical (default is <code>FALSE</code>). If we are to \(\log\) transform all
continuous features before sending the data to <code><a href="vaeac.html">vaeac()</a></code>. The <code>vaeac</code> model creates unbounded Monte Carlo
sample values. Thus, if the continuous features are strictly positive (as for, e.g., the Burr distribution and
Abalone data set), it can be advantageous to \(\log\) transform the data to unbounded form before using <code>vaeac</code>.
If <code>TRUE</code>, then <code><a href="vaeac_postprocess_data.html">vaeac_postprocess_data()</a></code> will take the \(\exp\) of the results to get back to strictly
positive values when using the <code>vaeac</code> model to impute missing values/generate the Monte Carlo samples.</p></dd>


<dt id="arg-val-ratio">val_ratio<a class="anchor" aria-label="anchor" href="#arg-val-ratio"></a></dt>
<dd><p>Numeric (default is <code>0.25</code>). Scalar between <code>0</code> and <code>1</code> indicating the ratio of
instances from the input data which will be used as validation data. That is, <code>val_ratio = 0.25</code> means
that <code>75%</code> of the provided data is used as training data, while the remaining <code>25%</code> is used as validation data.</p></dd>


<dt id="arg-batch-size">batch_size<a class="anchor" aria-label="anchor" href="#arg-batch-size"></a></dt>
<dd><p>Positive integer (default is <code>64</code>). The number of samples to include in each batch
during the training of the vaeac model. Used in <code><a href="https://torch.mlverse.org/docs/reference/dataloader.html" class="external-link">torch::dataloader()</a></code>.</p></dd>


<dt id="arg-paired-sampling">paired_sampling<a class="anchor" aria-label="anchor" href="#arg-paired-sampling"></a></dt>
<dd><p>Logical (default is <code>TRUE</code>). If <code>TRUE</code>, we apply paired sampling to the training
batches. That is, the training observations in each batch will be duplicated, where the first instance will be masked
by \(S\) while the second instance will be masked by \(\bar{S}\). This ensures that the training of the
<code>vaeac</code> model becomes more stable as the model has access to the full version of each training observation. However,
this will increase the training time due to more complex implementation and doubling the size of each batch. See
<code><a href="paired_sampler.html">paired_sampler()</a></code> for more information.</p></dd>


<dt id="arg-model-description">model_description<a class="anchor" aria-label="anchor" href="#arg-model-description"></a></dt>
<dd><p>String (default is <code>make.names(Sys.time())</code>). String containing, e.g., the name of the
data distribution or additional parameter information. Used in the save name of the fitted model. If not provided,
then a name will be generated based on <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">base::Sys.time()</a></code> to ensure a unique name. We use <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">base::make.names()</a></code> to
ensure a valid file name for all operating systems.</p></dd>


<dt id="arg-depth">depth<a class="anchor" aria-label="anchor" href="#arg-depth"></a></dt>
<dd><p>Positive integer (default is <code>3</code>). The number of hidden layers
in the neural networks of the masked encoder, full encoder, and decoder.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Positive integer (default is <code>32</code>). The number of neurons in each
hidden layer in the neural networks of the masked encoder, full encoder, and decoder.</p></dd>


<dt id="arg-latent-dim">latent_dim<a class="anchor" aria-label="anchor" href="#arg-latent-dim"></a></dt>
<dd><p>Positive integer (default is <code>8</code>). The number of dimensions in the latent space.</p></dd>


<dt id="arg-lr">lr<a class="anchor" aria-label="anchor" href="#arg-lr"></a></dt>
<dd><p>Positive numeric (default is <code>0.001</code>). The learning rate used in the <code><a href="https://torch.mlverse.org/docs/reference/optim_adam.html" class="external-link">torch::optim_adam()</a></code> optimizer.</p></dd>


<dt id="arg-epochs">epochs<a class="anchor" aria-label="anchor" href="#arg-epochs"></a></dt>
<dd><p>Positive integer (default is <code>100</code>). The number of epochs to train the final vaeac model.
This includes <code>epochs_initiation_phase</code>, where the default is <code>2</code>.</p></dd>


<dt id="arg-save-every-nth-epoch">save_every_nth_epoch<a class="anchor" aria-label="anchor" href="#arg-save-every-nth-epoch"></a></dt>
<dd><p>Positive integer (default is <code>NULL</code>). If provided, then the vaeac model after
every <code>save_every_nth_epoch</code>th epoch will be saved.</p></dd>


<dt id="arg-folder-to-save-model">folder_to_save_model<a class="anchor" aria-label="anchor" href="#arg-folder-to-save-model"></a></dt>
<dd><p>String (default is <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">base::tempdir()</a></code>). String specifying a path to a folder where
the function is to save the fitted vaeac model. Note that  the path will be removed from the returned
<code><a href="explain.html">explain()</a></code> object if <code>vaeac.save_model = FALSE</code>.</p></dd>


<dt id="arg-train-indices">train_indices<a class="anchor" aria-label="anchor" href="#arg-train-indices"></a></dt>
<dd><p>Numeric array (optional) containing the indices of the training observations.
There are conducted no checks to validate the indices.</p></dd>


<dt id="arg-val-indices">val_indices<a class="anchor" aria-label="anchor" href="#arg-val-indices"></a></dt>
<dd><p>Numeric array (optional) containing the indices of the validation observations.
#' There are conducted no checks to validate the indices.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of objects needed to train the <code>vaeac</code> model</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Jullum, Lars Henry Berge Olsen, Annabelle Redelmeier, Jon Lachmann, Nikolai Sellereite, Norsk Regnesentral.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

