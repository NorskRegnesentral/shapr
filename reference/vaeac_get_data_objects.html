<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Function to set up data loaders and save file names — vaeac_get_data_objects • shapr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Function to set up data loaders and save file names — vaeac_get_data_objects"><meta property="og:description" content="Function to set up data loaders and save file names"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/general_usage.html">General usage of shapr</a>
    </li>
    <li>
      <a href="../articles/vaeac.html">Advanced usage of the `vaeac` approach</a>
    </li>
    <li>
      <a href="../articles/regression.html">The separate and surrogate regression approches</a>
    </li>
    <li>
      <a href="../articles/asymmetric_causal.html">Asymmetric and Causal Shapley values</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/NorskRegnesentral/shapr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to set up data loaders and save file names</h1>
    <small class="dont-index">Source: <a href="https://github.com/NorskRegnesentral/shapr/blob/master/R/approach_vaeac.R" class="external-link"><code>R/approach_vaeac.R</code></a></small>
    <div class="hidden name"><code>vaeac_get_data_objects.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to set up data loaders and save file names</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vaeac_get_data_objects</span><span class="op">(</span></span>
<span>  <span class="va">x_train</span>,</span>
<span>  <span class="va">log_exp_cont_feat</span>,</span>
<span>  <span class="va">val_ratio</span>,</span>
<span>  <span class="va">batch_size</span>,</span>
<span>  <span class="va">paired_sampling</span>,</span>
<span>  <span class="va">model_description</span>,</span>
<span>  <span class="va">depth</span>,</span>
<span>  <span class="va">width</span>,</span>
<span>  <span class="va">latent_dim</span>,</span>
<span>  <span class="va">lr</span>,</span>
<span>  <span class="va">epochs</span>,</span>
<span>  <span class="va">save_every_nth_epoch</span>,</span>
<span>  <span class="va">folder_to_save_model</span>,</span>
<span>  train_indices <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  val_indices <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x-train">x_train<a class="anchor" aria-label="anchor" href="#arg-x-train"></a></dt>
<dd><p>A data.table containing the training data. Categorical data must have class names \(1,2,\dots,K\).</p></dd>


<dt id="arg-log-exp-cont-feat">log_exp_cont_feat<a class="anchor" aria-label="anchor" href="#arg-log-exp-cont-feat"></a></dt>
<dd><p>Logical (default is <code>FALSE</code>). If we are to \(\log\) transform all
continuous features before sending the data to <code><a href="vaeac.html">vaeac()</a></code>. The <code>vaeac</code> model creates unbounded Monte Carlo
sample values. Thus, if the continuous features are strictly positive (as for, e.g., the Burr distribution and
Abalone data set), it can be advantageous to \(\log\) transform the data to unbounded form before using <code>vaeac</code>.
If <code>TRUE</code>, then <code><a href="vaeac_postprocess_data.html">vaeac_postprocess_data()</a></code> will take the \(\exp\) of the results to get back to strictly
positive values when using the <code>vaeac</code> model to impute missing values/generate the Monte Carlo samples.</p></dd>


<dt id="arg-val-ratio">val_ratio<a class="anchor" aria-label="anchor" href="#arg-val-ratio"></a></dt>
<dd><p>Numeric (default is <code>0.25</code>). Scalar between <code>0</code> and <code>1</code> indicating the ratio of
instances from the input data which will be used as validation data. That is, <code>val_ratio = 0.25</code> means
that <code>75%</code> of the provided data is used as training data, while the remaining <code>25%</code> is used as validation data.</p></dd>


<dt id="arg-batch-size">batch_size<a class="anchor" aria-label="anchor" href="#arg-batch-size"></a></dt>
<dd><p>Positive integer (default is <code>64</code>). The number of samples to include in each batch
during the training of the vaeac model. Used in <code><a href="https://rdrr.io/pkg/torch/man/dataloader.html" class="external-link">torch::dataloader()</a></code>.</p></dd>


<dt id="arg-paired-sampling">paired_sampling<a class="anchor" aria-label="anchor" href="#arg-paired-sampling"></a></dt>
<dd><p>Logical (default is <code>TRUE</code>). If <code>TRUE</code>, we apply paired sampling to the training
batches. That is, the training observations in each batch will be duplicated, where the first instance will be masked
by \(S\) while the second instance will be masked by \(\bar{S}\). This ensures that the training of the
<code>vaeac</code> model becomes more stable as the model has access to the full version of each training observation. However,
this will increase the training time due to more complex implementation and doubling the size of each batch. See
<code><a href="paired_sampler.html">paired_sampler()</a></code> for more information.</p></dd>


<dt id="arg-model-description">model_description<a class="anchor" aria-label="anchor" href="#arg-model-description"></a></dt>
<dd><p>String (default is <code>make.names(Sys.time())</code>). String containing, e.g., the name of the
data distribution or additional parameter information. Used in the save name of the fitted model. If not provided,
then a name will be generated based on <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">base::Sys.time()</a></code> to ensure a unique name. We use <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">base::make.names()</a></code> to
ensure a valid file name for all operating systems.</p></dd>


<dt id="arg-depth">depth<a class="anchor" aria-label="anchor" href="#arg-depth"></a></dt>
<dd><p>Positive integer (default is <code>3</code>). The number of hidden layers
in the neural networks of the masked encoder, full encoder, and decoder.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Positive integer (default is <code>32</code>). The number of neurons in each
hidden layer in the neural networks of the masked encoder, full encoder, and decoder.</p></dd>


<dt id="arg-latent-dim">latent_dim<a class="anchor" aria-label="anchor" href="#arg-latent-dim"></a></dt>
<dd><p>Positive integer (default is <code>8</code>). The number of dimensions in the latent space.</p></dd>


<dt id="arg-lr">lr<a class="anchor" aria-label="anchor" href="#arg-lr"></a></dt>
<dd><p>Positive numeric (default is <code>0.001</code>). The learning rate used in the <code><a href="https://rdrr.io/pkg/torch/man/optim_adam.html" class="external-link">torch::optim_adam()</a></code> optimizer.</p></dd>


<dt id="arg-epochs">epochs<a class="anchor" aria-label="anchor" href="#arg-epochs"></a></dt>
<dd><p>Positive integer (default is <code>100</code>). The number of epochs to train the final vaeac model.
This includes <code>epochs_initiation_phase</code>, where the default is <code>2</code>.</p></dd>


<dt id="arg-save-every-nth-epoch">save_every_nth_epoch<a class="anchor" aria-label="anchor" href="#arg-save-every-nth-epoch"></a></dt>
<dd><p>Positive integer (default is <code>NULL</code>). If provided, then the vaeac model after
every <code>save_every_nth_epoch</code>th epoch will be saved.</p></dd>


<dt id="arg-folder-to-save-model">folder_to_save_model<a class="anchor" aria-label="anchor" href="#arg-folder-to-save-model"></a></dt>
<dd><p>String (default is <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">base::tempdir()</a></code>). String specifying a path to a folder where
the function is to save the fitted vaeac model. Note that  the path will be removed from the returned
<code><a href="explain.html">explain()</a></code> object if <code>vaeac.save_model = FALSE</code>.</p></dd>


<dt id="arg-train-indices">train_indices<a class="anchor" aria-label="anchor" href="#arg-train-indices"></a></dt>
<dd><p>Numeric array (optional) containing the indices of the training observations.
There are conducted no checks to validate the indices.</p></dd>


<dt id="arg-val-indices">val_indices<a class="anchor" aria-label="anchor" href="#arg-val-indices"></a></dt>
<dd><p>Numeric array (optional) containing the indices of the validation observations.
#' There are conducted no checks to validate the indices.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>List of objects needed to train the <code>vaeac</code> model</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin Jullum, Lars Henry Berge Olsen, Annabelle Redelmeier, Jon Lachmann, Nikolai Sellereite, Norsk Regnesentral.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

