<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Mean Squared Error of the Contribution Function v(S) — compute_MSEv_eval_crit • shapr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Mean Squared Error of the Contribution Function v(S) — compute_MSEv_eval_crit"><meta property="og:description" content="Function that computes the Mean Squared Error (MSEv) of the contribution function
v(s) as proposed by Frye et al. (2019) and used by
Olsen et al. (2022)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/general_usage.html">General usage of shapr</a>
    </li>
    <li>
      <a href="../articles/vaeac.html">Advanced usage of the `vaeac` approach</a>
    </li>
    <li>
      <a href="../articles/regression.html">The separate and surrogate regression approches</a>
    </li>
    <li>
      <a href="../articles/asymmetric_causal.html">Asymmetric and Causal Shapley values</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/NorskRegnesentral/shapr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Mean Squared Error of the Contribution Function <code>v(S)</code></h1>
    <small class="dont-index">Source: <a href="https://github.com/NorskRegnesentral/shapr/blob/master/R/finalize_explanation.R" class="external-link"><code>R/finalize_explanation.R</code></a></small>
    <div class="hidden name"><code>compute_MSEv_eval_crit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function that computes the Mean Squared Error (MSEv) of the contribution function
v(s) as proposed by <a href="https://arxiv.org/pdf/2006.01272" class="external-link">Frye et al. (2019)</a> and used by
<a href="https://www.jmlr.org/papers/volume23/21-1413/21-1413.pdf" class="external-link">Olsen et al. (2022)</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compute_MSEv_eval_crit</span><span class="op">(</span></span>
<span>  <span class="va">internal</span>,</span>
<span>  <span class="va">dt_vS</span>,</span>
<span>  <span class="va">MSEv_uniform_comb_weights</span>,</span>
<span>  MSEv_skip_empty_full_comb <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-internal">internal<a class="anchor" aria-label="anchor" href="#arg-internal"></a></dt>
<dd><p>List.
Holds all parameters, data, functions and computed objects used within <code><a href="explain.html">explain()</a></code>
The list contains one or more of the elements <code>parameters</code>, <code>data</code>, <code>objects</code>, <code>iter_list</code>, <code>timing_list</code>,
<code>main_timing_list</code>, <code>output</code>, and <code>iter_timing_list</code>.</p></dd>


<dt id="arg-dt-vs">dt_vS<a class="anchor" aria-label="anchor" href="#arg-dt-vs"></a></dt>
<dd><p>Data.table of dimension <code>n_coalitions</code> times <code>n_explain + 1</code> containing the contribution function
estimates. The first column is assumed to be named <code>id_coalition</code> and containing the ids of the coalitions.
The last row is assumed to be the full coalition, i.e., it contains the predicted responses for the observations
which are to be explained.</p></dd>


<dt id="arg-msev-uniform-comb-weights">MSEv_uniform_comb_weights<a class="anchor" aria-label="anchor" href="#arg-msev-uniform-comb-weights"></a></dt>
<dd><p>Logical.
If <code>TRUE</code> (default), then the function weights the coalitions uniformly when computing the MSEv criterion.
If <code>FALSE</code>, then the function use the Shapley kernel weights to weight the coalitions when computing the MSEv
criterion.
Note that the Shapley kernel weights are replaced by the sampling frequency when not all coalitions are considered.</p></dd>


<dt id="arg-msev-skip-empty-full-comb">MSEv_skip_empty_full_comb<a class="anchor" aria-label="anchor" href="#arg-msev-skip-empty-full-comb"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), we exclude the empty and grand
coalitions when computing the MSEv evaluation criterion. This is reasonable as they are identical
for all methods, i.e., their contribution function is independent of the used method as they are special cases not
effected by the used method. If <code>FALSE</code>, we include the empty and grand coalitions. In this situation,
we also recommend setting <code>MSEv_uniform_comb_weights = TRUE</code>, as otherwise the large weights for the empty and
grand coalitions will outweigh all other coalitions and make the MSEv criterion uninformative.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>List containing:</p><dl><dt><code>MSEv</code></dt>
<dd><p>A <code><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></code> with the overall MSEv evaluation criterion averaged
over both the coalitions and observations/explicands. The <code><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></code>
also contains the standard deviation of the MSEv values for each explicand (only averaged over the coalitions)
divided by the square root of the number of explicands.</p></dd>

<dt><code>MSEv_explicand</code></dt>
<dd><p>A <code><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></code> with the mean squared error for each
explicand, i.e., only averaged over the coalitions.</p></dd>

<dt><code>MSEv_coalition</code></dt>
<dd><p>A <code><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></code> with the mean squared error for each
coalition, i.e., only averaged over the explicands/observations.
The <code><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></code> also contains the standard deviation of the MSEv values for
each coalition divided by the square root of the number of explicands.</p></dd>


</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The MSEv evaluation criterion does not rely on access to the true contribution functions nor the
true Shapley values to be computed. A lower value indicates better approximations, however, the
scale and magnitude of the MSEv criterion is not directly interpretable in regard to the precision
of the final estimated Shapley values.
<a href="https://link.springer.com/content/pdf/10.1007/s10618-024-01016-z.pdf" class="external-link">Olsen et al. (2024)</a>
illustrates in Figure 11 a fairly strong linear relationship between the MSEv criterion and the
MAE between the estimated and true Shapley values in a simulation study. Note that explicands
refer to the observations whose predictions we are to explain.</p>
    </div>
    <div id="references">
    <h2>References</h2>

<ul><li><p><a href="https://arxiv.org/pdf/2006.01272" class="external-link">
Frye, C., de Mijolla, D., Begley, T., Cowton, L., Stanley, M., &amp; Feige, I. (2021).
Shapley explainability on the data manifold. In International Conference on Learning Representations.</a></p></li>
<li><p><a href="https://www.jmlr.org/papers/volume23/21-1413/21-1413.pdf" class="external-link">
Olsen, L. H., Glad, I. K., Jullum, M., &amp; Aas, K. (2022). Using Shapley values and variational autoencoders to
explain predictive models with dependent mixed features. Journal of machine learning research, 23(213), 1-51</a></p></li>
<li><p><a href="https://link.springer.com/content/pdf/10.1007/s10618-024-01016-z.pdf" class="external-link">
Olsen, L. H. B., Glad, I. K., Jullum, M., &amp; Aas, K. (2024). A comparative study of methods for estimating
model-agnostic Shapley value explanations. Data Mining and Knowledge Discovery, 1-48</a></p></li>
</ul></div>
    <div id="author">
    <h2>Author</h2>
    <p>Lars Henry Berge Olsen</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin Jullum, Lars Henry Berge Olsen, Annabelle Redelmeier, Jon Lachmann, Nikolai Sellereite, Norsk Regnesentral.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

